<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Escapade101 - Vacation Planner</title>
    <link rel='shortcut icon' type='image/x-icon' href='favicon.ico' />
    <!--<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" />-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="styles/common.css">
    <link rel="stylesheet" href="styles/home.css">
    <link rel="stylesheet" href="styles/review.css">
    <link href='https://fonts.googleapis.com/css?family=Waiting+for+the+Sunrise' rel='stylesheet' type='text/css'> 
    <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
</head>
<body onload="onLoad();getTravellerInfo();setValues();">
<header>
    <div id="travel-alerts" class="backWhite red alert">
        Flights to New York are delayed due to weather conditions
    </div>
    <div class="bgColor">
    <div class="header col-1">
        <div class="nav-div">
            <div id="logo">
                <img class="logo-image" src="images/Picture2.png" alt="Escapade Logo"/>
                <!--<img class="logo-image" alt="Escapade Logo"/>-->
                <!--<span id="title">Vacation Planner</span>-->
            </div>
            <nav>
                <div id="nav" class="nav">
                    <ul class="nav-links">
                        <li><a href="home.html" class="selected">
                            <input id="tab1" type="radio" name="tabs" checked>
                            <label for="tab1"> Flights</label>
                        </a></li>
                        <li><a href="rentals.html" class="selected">
                            <input id="tab2" type="radio" name="tabs" checked>
                            <label for="tab2"> Rentals</label>
                        </a></li>
                        <!--<li><a href="rentals.html"><span class="rentals">Rentals</span></a></li>-->
                        <!--<li><i class="fa fa-car"></i>&nbsp;<a href="rentals.html">Rentals</a></li>-->
                    </ul>
                </div>
            </nav>
        </div>    
    </div>
    <div class="col-2">
    <nav>
        <div id="right-nav" class="right-nav custom-dropdown">
            <input type="checkbox" checked="false" id="button">
            <label for="button"></label>
            <ul class="right-nav-links">
                <li><a href="login.html">Login</a></li>
                <li><a href="register.html">Register</a></li>
                <li><a href="support.html">Support</a></li>
            </ul>
        </div>
    </nav>
    </div>
    </div>
</header>
<div>
<div id="alignBody">
<section class="left">
	<div>
	
 	<div id="div1">
		<h1 class="styleHeading"> Review your trip </h1>
	</div>
	<!--<div id="tripAmount">
		<span> Trip Total:  </span><span id="displayPrice"> </span>
	</div>-->
	<div id="div2">
		<div id="tickDiv"><img src="images/tick.png" alt="Tick Image"/>
		<span id="para1">Nice Job! You picked one of our cheapest flights.</span><br>
		<span id="para2">Book now so you don't miss out on this price!</span>
		</div>
		<div></div>
	</div>
	<div id="div3">
		<ul class="ulStyle">
		
		</ul>
	</div>

	</div>	

</section>
	
	<section class="right">
	<section class="rightDisplay">
	<p> <h1 class="styleHeading"> Trip Summary</h1></p>
	<div id="passPerPerson"> 
	<span>
	<span id="numberOfTickets"> <strong> 2 Tickets: </strong> </span>
	<span> Roundtrip </span>
	<span class="separator"></span>
	</span>
	</div>
	<div class="separator">
	</div>
	<div id="productPriceSummary" class="borderTop"> 
		
		<ul class="ulStyleTr">
		
		</ul>
		<div id="itemPriceSummary">
			<span id="booking"> Booking Fee </span>
			<span id="bookingFee" style="float:right"> $0.00 </span>
		</div>		
	</div>
	<div id="totalContainer" class="itemClass">
	 		<div class="separator"> </div>
	 		<div id="tripTotal" class="totalClass">
				<div id= "colRight">
				<span id="lbltotals"> Trip Total: </span>
				<span id="displayPrice" class="stylePrice">  </span>
				</div>	
	 		</div>
	
	</div>
	</section>
	<section class="rightDisplay">
	<span class="ratesStyle">Rates are quoted in US dollars</span>
	</section>
	<section class="rightDisplay">
	<h3 class="styleHeading"> <span><img src="images/imp1.png" alt="Mountain View" style="width:5%;height:5%;"></span> 
	<span> Important Flight Information </span> </h3>
	<div>
	<ul>
	<li>
	Tickets are <strong>non-refundable</strong> and <strong>non transferable</strong>. A fee of $125.00 per ticket is charged for itinerary changes. Name changes are not allowed.
	</li>
	<li> 
	<div>
	<strong>All Spirit Airlines fares are non-refundable</strong> 
		<div>
			<strong>Bare Fares</strong>
 			Spirit's low 
 			get you from A to B with one personal item such as a small backpack or purse
			(Maximum dimensions: 16"x14"x12")    
		</div>
		<div>
		<strong>Additional purchase will be required for the following:</strong>
		<ul>
			<li> One Carry-on bag per passenger </li>
			<li> All checked bags (overweight bag charges start at 41 lbs.) </li>
			<li> Advance Seat Assignments </li>
			<li> All onboard drinks and snacks </li>
		</ul>
		</div>
	</div>
	</li>
	</ul>
	</div>
	For the full pricing list, please visit:
	<a href="http://www.spirit.com/OptionalServices" target="_blank">Spirit Airlines<span ></span><span class="alt"> Opens in a new window</span></a>

</section>

</section>
	<div>
	    <div class="searchBtn">
		<input type="button" id="searchButton" value="Continue Booking" class="button" onclick="nextPage();"/> 
		<span id="freeCnl"> <img src="images/tick.png" alt="Tick Image"/> Free Cancellation within 24 hours of booking! 
		</span> 
	    </div>
	</div>	
</div>
	
</div>

<footer>
    <div class="footer">
        <nav>
            <div class="footer-nav">
                <ul class="footer-nav-links">
                    <li><a href="aboutUs.html">About Us</a></li>
                    <li class="marginLeft"><a href="contactUs.html">Contact Us</a></li>
                </ul>
            </div>
        </nav>
        </br></br>
        <span class="grey">© 2016 All Rights Reserved</span>
    </div>
</footer>
<script>

/*function renderDate(){ 
	var mydate= new Date();
	var year = mydate.getYear();
	if(year < 1000){
	 year += 1900;
	}
	var day = mydate.getDay();
	var month = mydate.getMonth();
	var daym = mydate.getDate();
	var dayarray = new Array("Sun","Mon","Tue", "Wed", "Thur", "Fri", "Sat");
	var montharray = new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");
	
	$('#dateDisplay').append(""+dayarray[day] + ", " +daym+ " " +montharray[month]);
}*/

function setValues(){ 
	$("#showOntoggle1").hide();
	$("#showOntoggle2").hide();
	$("#showOntoggle3").hide();
	$("#showOntoggle4").hide();
	$("#showOntoggle5").hide();

	$("#div2").hide();
	var origin;
	var destination;
	var departureTime;
	var arrivalTime;
	var duration;
	var price;
	if (typeof(Storage) !== "undefined") {
	// Store
	origin = (localStorage.getItem("origin")).split(",");
	destination = (localStorage.getItem("destination")).split(",");
	departureTime = (localStorage.getItem("departureTime")).split(",");
	arrivalTime = (localStorage.getItem("arrivalTime")).split(",");
	duration = (localStorage.getItem("duration")).split(",");
	price = (localStorage.getItem("price")).split(",");
	} else {
		alert( "Sorry, your browser does not support Web Storage!!");
	}
	//alert(origin);
	//alert("1"+origin.length);
	//for (var i = 0; i < origin.length; i++) {
	//$('.dynamic').append("<section id='sec1'><div class='deptArrDur' id='dept'>"+departureTime[i]+"</div><div class='org'>"+origin[i]+"</div></section><section><div></div></section><section><div id='arr' class='deptArrDur'>"+arrivalTime[i]+"</div><div id='dest'>"+destination[i]+"</div></section><section><div id='dur' class='deptArrDur'>"+duration[i]+"</div></section><br><br><br><br>");
	//}
		
	//document.getElementById('span5').innerHTML=""+origin[0];
	//document.getElementById('span6').innerHTML=""+destination[destination.length-1];
	document.getElementById('displayPrice').innerHTML =" "+price;
}

function nextPage(){
	window.document.location.href = 'personal-info.html';
}

function showOnToggle1(){
	$("#showOntoggle1").toggle('slow');
}
function showOnToggle2(){
	$("#showOntoggle2").toggle('slow');
}
function showOnToggle3(){
	$("#showOntoggle3").toggle('slow');
}
function showOnToggle4(){
	$("#showOntoggle4").toggle('slow');
}
function showOnToggle5(){
	$("#showOntoggle5").toggle('slow');
}


function showBagToggle1(){
	$("#showBagToggle1").toggle('slow');
}
function showBagToggle0(){
	$("#showBagToggle0").toggle('slow');
}


function getTravellerInfo(){
	for(var i=1;i<=2;i++){
		$('.ulStyleTr').append("<li><a id='toggle' onclick='showOnToggle"+i+"()' class='styleAnch'> Traveller "+i+":<span id='passengerType'> Adult </span><span id='passengerPrice' class='floatRight'> $580 </span> </a></li><div id='showOntoggle"+i+"'><ul class='ulStyleTrCl'><li> <span> Flights </span><span id='flightamount' class='floatRight'> $425.00</span></li><li><span> Taxes & Fees </span><span id='taxFeeAmt' class='floatRight'>$137.05</span></li></ul></div>");
	}
}

var fli={
	"totalSales": "USD1096.20",
     "flightSlices": [
       {
         "legs": [
           {
             "departureTime": "2016-03-10T17:50",
             "arrivalTime": "2016-03-10T19:50",
             "duration": 120,
             "destination": "SEA",
             "origin": "SJC",
             "connectionDuration": 185,
             "carrier": "AS",
             "number": 201
           },
           {
             "departureTime": "2016-03-10T22:55",
             "arrivalTime": "2016-03-11T07:09",
             "duration": 314,
             "destination": "EWR",
             "origin": "SEA",
             "connectionDuration": 41,
             "carrier": "UA",
             "number": 1695
           },
           {
             "departureTime": "2016-03-11T07:50",
             "arrivalTime": "2016-03-11T10:52",
             "duration": 182,
             "destination": "SRQ",
             "origin": "EWR",
             "connectionDuration": 0,
             "carrier": "UA",
             "number": 1559
           }
         ]
       },
       {
         "legs": [
           {
             "departureTime": "2016-03-12T10:56",
             "arrivalTime": "2016-03-12T12:51",
             "duration": 175,
             "destination": "ORD",
             "origin": "SRQ",
             "connectionDuration": 203,
             "carrier": "UA",
             "number": 1641
           },
            {
              "departureTime": "2016-03-12T16:14",
              "arrivalTime": "2016-03-12T17:59",
              "duration": 165,
              "destination": "DEN",
              "origin": "ORD",
              "connectionDuration": 51,
              "carrier": "UA",
              "number": 459
            },
           {
             "departureTime": "2016-03-12T18:50",
             "arrivalTime": "2016-03-12T20:28",
             "duration": 158,
             "destination": "SJC",
             "origin": "ORD",
             "connectionDuration": 0,
             "carrier": "UA",
             "number": 748
           }
         ]
       }
     ]
   };

function onLoad(){

 var data=fli.flightSlices.length; // to check whether it is roundtrip or One way
	for(var i=0;i<data;i++){
		getFlightInfo(i);
	}
    $("#showBagToggle1").hide();
	$("#showBagToggle0").hide();

}

function getFlightInfo(value){

	//$('.ulStyle').append("<li><div class='borderTop'></div> <span class='separator'></span></li>");
	
	for(var i=value;i<=value;i++){
			var opt=fli.flightSlices[i]; // each and every flight Slice
			var len=opt.legs.length;
			var totalTime=1; // duration display - by summing the each slice duration
			var stops='';
			for(var k=0;k<len;k++){ 
				totalTime +=opt.legs[k].duration;
			}
			for(var a=0;a<len-1;a++){ // to determine the stops
				stops +=opt.legs[a].destination+',';
			}

		$('.ulStyle').append("<li><div></div> <span class='separator'></span></li>");
		$('.ulStyle').append("<li><article class='articleStyle'><div class='firstDiv'><div class='depDate'><h3 id='departureDate'> Sat, Feb 27 </h3></div><div class='fromToDiv'><div class='fromToLabels'><span class='fromClass'> From </span><span class='styleFromToText'> "+opt.legs[0].origin+" </span></div><div class='fromToLabels'> <span class='toClass'> To&nbsp&nbsp </span><span class='styleFromToText'> "+opt.legs[len-1].destination+" </span></div></div>  	<div class='imageDiv'><div><img src=\"//images.trvl-media.com/media/content/expus/graphics/static_content/fusion/v0.1b/images/airlines/UA.gif\" alt='United'> </div></div>                <div class='flightDetails'><div class='deptDetails'><div class='deptArrDurStyle' id='departtime'> "+getTime(opt.legs[0].departureTime)+"</div><div class='orgDestVia' id='departArpt'> "+opt.legs[0].origin+" </div></div><div class='toImageStyle' id='arrowImg'><span><img src=\"images/arrow.png\" alt='United'></span></div><div class='arrDetails'><div class='deptArrDurStyle' id='arrtime'> "+getTime(opt.legs[len-1].arrivalTime)+" </div><div class='orgDestVia' id='aarArpt'> "+opt.legs[len-1].destination+"</div></div><div class='durDtls'><div id='durTime' class='deptArrDurStyle'> "+calDuration(totalTime)+", "+(len-1)+" Stops </div><div class='orgDestVia' id='secCode'> "+stops.slice(',',-1)+" </div> <div class='separator'></div></div>" ); 
		//
		$('.ulStyle').append("<li class='ulStyleBag'> <a id='toggle' onclick='showBagToggle"+i+"()' class='styleAnch'> Flight Details </a>   <div class='testdiv' id='showBagToggle"+i+"'><ul class='ulStyleBagCl'>");
		for(var j=0;j<len;j++){
		//alert(opt.legs[j].origin);
			$('#showBagToggle'+i+'').append("<div class='separator'></div> <li><article class='articleStyle'><div class='flightDetails'><div class='deptDetails'><div class='deptArrDurStyle' id='departtime'>"+getTime(opt.legs[j].departureTime)+"</div></div><div class='toImageStyle' id='arrowImg'><span><img src=\"images/arrow.png\" alt='United'></span></div><div class='arrDetails'><div id='arrtime' class='deptArrDurStyle' >"+getTime(opt.legs[j].arrivalTime)+"</div></div><div class='durDtls'><div id='durTime' class='deptArrDurStyle'>"+calDuration(opt.legs[j].duration)+"</div></div><div class='firstDiv'></div><div class='fromToDiv'><div class='paddingLeft47'><span class='fromClass'> From </span><span class='fromClass'> "+opt.legs[j].origin+" </span></div><div class='paddingLeft47'><span class='toClass'> To&nbsp&nbsp&nbsp </span><span class='toClass'>"+opt.legs[j].destination+"</span></div></div><div class='imageDiv'><div class='paddingLeft38'> <span class='carrier'>"+opt.legs[j].carrier+"</span> </div></div><div class='imageDiv'><div class='paddingLeft38'><span class='flghtNumber'>"+opt.legs[j].number+"</span> </div></div><div class='imageDiv'><div class='paddingLeft38'> <span class='stopStyle'>"+calDuration(opt.legs[j].connectionDuration)+" &nbsp Stop</span><span class='stopDestnStyle'> &nbsp in &nbsp"+opt.legs[j].destination+" </span> </div></div> " );  
			
			$('#showBagToggle'+i+'').append("<li><span class='separator'></span></li> </article></li>");
			
			/*<span> Flights </span><span id='flightamount' class='floatRight'> $425.00</span></li><li><span> Taxes & Fees </span><span id='taxFeeAmt' class='floatRight'>$137.05</span></li><li> <span> Flights </span><span id='flightamount' class='floatRight'> $425.00</span></li><li><span> Taxes & Fees </span><span id='taxFeeAmt' class='floatRight'>$137.05</span></li>");*/
		}
		$('.testdiv').append("</ul></div>");
		$('.ulStyle').append("    </ul>");
		
		$('.ulStyle').append("      <li><span class='separator'></span></li>");
	
	}
	$('.ulStyle').append("<li><div class='borderTop'></li>");
}

function calDuration(mins){
	 var HRSMINS =0;
	if(mins!=0){
		var m = mins % 60;
		var	h = (mins-m)/60;
		HRSMINS = h.toString() + "hr " + (m<10?"0":"") + m.toString() +"min";
	}else{
		HRSMINS =0;
	}
    return HRSMINS;
}

function getTime(dateTime) {
	var d = new Date(dateTime);
	var n = d.toLocaleTimeString();
	return n;
}


</script>
</body>
</html>
